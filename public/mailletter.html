<!DOCTYPE html>
<html lang="en">

<head>
    <title>Santa's Letter</title>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
            href="https://fonts.googleapis.com/css2?family=Diphylleia&family=Dongle&family=Gasoek+One&family=Hahmlet:wght@100..900&family=Poor+Story&display=swap"
            rel="stylesheet">
    <style>
        /* ëˆˆì†¡ì´ ì• ë‹ˆë©”ì´ì…˜ */
        .snow {
            position: fixed;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 3px 3px white;
            top: -10px;
        }

        @keyframes fall {
            from {
                transform: translateY(-10vh);
                opacity: 1;
            }

            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* ì „ì²´ ë°°ê²½ */
        body {
            margin: 0;
            padding: 0;
            background-color: #080825;
            font-family: 'Diphylleia', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .overlay {
            background-color: rgba(255, 255, 255, 0.206);
            padding: 100px;
            border-radius: 50px;
            color: white;
            width: 80%;
            max-width: 70%;
            text-align: center;
            position: relative;
            height: 80vh;
            overflow-y: auto;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .modal-content {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 30px;
            width: 80%;
            max-width: 800px;
            color: black;
            text-align: center;
            height: 650px;
            font-size: 40px;
        }

        .close-button {
            background-color: #ecd8b7;
            color: black;
            border: none;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 1%;
            font-size: 27px;
            width: 14%;
        }

        /* ì´ë¦„ ì…ë ¥ì°½ê³¼ ë²„íŠ¼ */
        .message-form1 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .input1 {
            width: 55%;
            height: 77px;
            padding: 10px;
            font-size: 30px;
            border-radius: 50px;
            border: none;
            background-color: #ffffff;
            color: black;
            outline: none;
            font-family: 'Diphylleia', sans-serif;
            margin-top: 10%;
            margin-left: 24%;
        }

        button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #ecd8b7;
            color: black;
            border: none;
            cursor: pointer;
            font-size: 35px;
            font-family: 'Diphylleia', sans-serif;
            transition: background-color 0.3s;
            margin-top: 10%;
            margin-right: -4%;
        }

        button:hover {
            background-color: #ffffff;
        }

        /* í…ìŠ¤íŠ¸ ì…ë ¥ì°½ */
        #message-box {
            margin-top: 5%;
            width: 100%;
            height: 80%;
            font-size: 36px;
            border: 2px solid #ffffff;
            border-radius: 40px;
            background-color: #ffffff;
            color: black;
            outline: none;
            margin-left: -5.5%;
            font-family: 'Diphylleia', sans-serif;
            padding: 40px;
        }
    </style>
</head>

<body>
<!-- ëª¨ë‹¬ -->
<div id="modal" class="modal">
    <div class="modal-content">
        <p id="introduction">
            ğŸ…ğŸ» ìµëª…ì˜ ì‚¬ëŒì—ê²Œ í¸ì§€ë¥¼ ì¨ë³´ì„¸ìš” <br>
            ì‚°íƒ€ì˜ í¸ì§€ê°€ ì†í¸ì§€ë¡œ ì‘ì„±í•˜ì—¬ <br>ìµëª…ìœ¼ë¡œ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.<br><br>
            â€¢ 5ì¤„ ì´ìƒì˜ ì§„ì •ì„±ìˆëŠ” í¸ì§€ë¥¼ ì¨ì£¼ì„¸ìš”<br>
            â€¢ ë¹„ë°© ë˜ëŠ” ì¥ë‚œì„± í¸ì§€ëŠ” ë³´ë‚´ì§€ì§€ ì•Šì•„ìš”<br>
            â€¢ ë³´ë‚´ëŠ” ì´ëŠ” 'ë‹‰ë„¤ì„'ìœ¼ë¡œ ë³´ë‚´ì§‘ë‹ˆë‹¤.
        </p>
        <button class="close-button" onclick="closeModal()">ë‹«ê¸°</button>
    </div>
</div>

<div class="overlay">
    <!-- ì´ë¦„ ì…ë ¥ ë° ë²„íŠ¼ -->
    <form id="message-form" class="message-form1">
        <input type="text" id="nickname" class="input1" placeholder="  ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required>
        <button type="button" onclick="confirmLink(event)">ì „ì†¡</button> <!-- 'type="button"'ì„ ì¶”ê°€ -->
    </form>
    <!-- ë©”ì‹œì§€ ì…ë ¥ì°½ -->
    <textarea id="message-box" class="input2" placeholder="ğŸ„ ë‚´ê°€ ì´ í¸ì§€ë¥¼ ë°›ìœ¼ë©´ ì–´ë–¨ê¹Œ?
    ìƒìƒí•˜ë©´ì„œ ì ì–´ë³´ì„¸ìš” â˜ºï¸" required></textarea>
</div>

<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ëª¨ë‹¬ì„ ë„ìš°ëŠ” í•¨ìˆ˜
    window.onload = function () {
        document.getElementById("modal").style.display = "flex";
    };

    // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
    function closeModal() {
        document.getElementById("modal").style.display = "none";
    }

    function confirmLink(event) {
        event.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€ (í¼ ì œì¶œ ë°©ì§€)

        const nickname = document.getElementById('nickname').value.trim();
        const message = document.getElementById('message-box').value.trim();

        // ë‹‰ë„¤ì„ê³¼ ë©”ì‹œì§€ê°€ ëª¨ë‘ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (!nickname || !message) {
            alert('ë‹‰ë„¤ì„ê³¼ ë©”ì‹œì§€ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        const userConfirmed = confirm("í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í¸ì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤ ğŸ„");

        // ì‚¬ìš©ìê°€ í™•ì¸ì„ ëˆŒë €ì„ ë•Œ
        if (userConfirmed) {
            // ì„œë²„ë¡œ ë©”ì‹œì§€ ì „ì†¡
            fetch('/save-message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({nickname, message})
            })
                .then(response => {
                    if (response.ok) {
                        alert('í¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        window.location.href = 'am.html';  // ì „ì†¡ í›„ a.htmlë¡œ ì´ë™
                    } else {
                        alert('í¸ì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    }
                })
                .catch(error => {
                    alert('ì„œë²„ ì˜¤ë¥˜ë¡œ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                });
        }
    }

    // ëˆˆì†¡ì´ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
    for (let i = 0; i < 200; i++) {
        const snow = document.createElement("div");
        snow.className = "snow";
        snow.style.opacity = Math.random();

        const startX = Math.random() * 100 - 50;
        const endX = startX + (Math.random() * 20 - 10);
        const scale = Math.max(Math.random(), 0.5);

        const keyframe = [
            {transform: `translate(${startX}vw, 0vh) scale(${scale})`},
            {transform: `translate(${endX}vw, 100vh) scale(${scale})`},
        ];

        const option = {
            duration: 15000 + Math.random() * 5000,
            easing: "linear",
            iterations: Infinity,
            delay: -Math.random() * 20000,
        };

        snow.animate(keyframe, option);
        document.body.appendChild(snow);
    }
</script>
</body>

</html>